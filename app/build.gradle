plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'kotlin-kapt'
    id 'com.google.devtools.ksp' version "1.6.21-1.0.5"
    id 'androidx.navigation.safeargs.kotlin'
}

android {
    compileSdk 33

    viewBinding {
        enabled = true
    }
    dataBinding {
        enabled = true
    }

    defaultConfig {
        applicationId "com.jeanbernad.randomuser"
        minSdk 26
        targetSdk 33
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"

        javaCompileOptions {
            annotationProcessorOptions {
                arguments += ["room.schemaLocation":
                                     "$projectDir/schemas".toString()]
            }
        }
    }

    buildTypes {
        debug {
            buildConfigField("String", "RANDOM_USER_API", '"https://randomuser.me/"')
        }
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
            buildConfigField("String", "RANDOM_USER_API", '""https://randomuser.me/"')
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }
    kotlinOptions {
        jvmTarget = '11'
    }
    viewBinding {
        enabled = true
    }
}

dependencies {
    implementation "androidx.core:core-ktx:$kotlin_version"
    implementation "androidx.appcompat:appcompat:$appcompat_version"
    implementation "com.google.android.material:material:$material_version"
    implementation "androidx.constraintlayout:constraintlayout:$constraint_layout_version"
    testImplementation "junit:junit:$junit_version"

    //Testing
    implementation androidTestingDependencies.android_core
    testImplementation androidTestingDependencies.android_core_testing
    testImplementation androidTestingDependencies.truth
    testImplementation androidTestingDependencies.coroutines

    //Android testing
    androidTestImplementation androidTestingDependencies.android_junit
    androidTestImplementation androidTestingDependencies.espresso
    androidTestImplementation androidTestingDependencies.android_core_testing
    androidTestImplementation androidTestingDependencies.truth
    androidTestImplementation androidTestingDependencies.coroutines

    //Coroutines
    implementation coroutinesDependencies.core
    implementation coroutinesDependencies.android

    //Lifecycle
    implementation lifecycleDependencies.view_model
    implementation lifecycleDependencies.runtime
    implementation lifecycleDependencies.livedata
    implementation lifecycleDependencies.common

    //Navigation
    implementation navigationDependencies.fragment
    implementation navigationDependencies.ui

    // Koin
    implementation koinDependencies.core
    implementation koinDependencies.android

    //Dagger
    implementation daggerDependencies.dagger
    //todo waiting for ksp
    kapt daggerDependencies.compiler

    implementation okhttpDependenciees.okhttp
    implementation okhttpDependenciees.interseptor

    //Retrofit
    implementation retrofitDependencies.retrofit
    implementation retrofitDependencies.converter

    //Room
    implementation roomDependencies.runtime
    implementation roomDependencies.ktx
    ksp roomDependencies.compiler

    //Coil
    implementation coilDependencies.coil
    implementation coilDependencies.base

    //CircleImageView
    implementation circleImageViewDependency

    //SwipeRefresh
    implementation swiperefreshlayoutDependency

    //Launch screen
    implementation launchScreenDependency
}

kapt {
    correctErrorTypes true
}